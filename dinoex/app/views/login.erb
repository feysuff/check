<main role="main" class="inner cover">
  <p class="lead"><h6></h6></p>
  <form class="form-signin">
    <div class="text-center mb-4">
      <h1 class="h3 mb-3 font-weight-normal">Логин</h1> 
    </div>
    <div class="form-label-group">
      <input type="text" id="username" class="form-control" placeholder="Username:" required autofocus>
      <label for="username"></label>
    </div>
    <div class="form-label-group">
      <input type="password" id="password" class="form-control" placeholder="Password:" required>
      <label for="inputPassword"></label>
    </div>
    <div class="checkbox mb-3">
      <label>
        <a href="reset" style="color: rgb(255, 255, 255);-webkit-text-stroke: 0.01cm;">Забыли пароль?</a>
      </label>
    </div>
    <button id="senduserinfobutton" class="btn btn-lg btn-warning btn-block" type="submit">Логин</button>
  </form>
</main>

<script>
  document.getElementById('senduserinfobutton').addEventListener('click', async function(event) {
    event.preventDefault();
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const json = JSON.stringify({
      username: username,
      password: password
    });
    const serverUrl = `${location.origin}/api/users/login`;
    fetch(serverUrl, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      credentials: "include",
      body: json
    }).then((result)=>{
      if (result.status === 200) {
        window.location = `${location.origin}`;
      } else if (result.status === 500) {
        alert("Something went wrong")
      }
    })
  });
</script>    
